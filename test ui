local ListSizeX = 0
        local function RecalculateListSize()
            local totalCount = #Dropdown.Values
            local itemHeight = 32
            local padding = 3
            local innerMargins = 10
            local searchBarHeight = Dropdown.Search and 38 or 0 -- Add search bar height if search is enabled
            
            local estimatedContent = (totalCount > 0) and (totalCount * itemHeight + (totalCount - 1) * padding + innerMargins) or innerMargins
            local maxHeight = 392
            local many = totalCount > 10
            
            -- Add search bar height to total height
            local targetHeight = math.min(estimatedContent + searchBarHeight, maxHeight)
            
            -- Set minimum height based on whether search is enabled
            local minHeight
            if Dropdown.Search then
                -- With search: accommodate search bar + at least 3 items with proper spacing
                minHeight = searchBarHeight + (itemHeight * 3) + (padding * 3) + (innerMargins * 2)
            else
                -- Without search: accommodate at least 2 full items with proper spacing
                minHeight = (itemHeight * 2) + padding + (innerMargins * 2)
            end
            targetHeight = math.max(targetHeight, minHeight)
            
            DropdownHolderCanvas.Size = UDim2.fromOffset(ListSizeX, targetHeight)
            DropdownHolderFrame.Size = UDim2.fromScale(1, many and 0.6 or 1)
        end
